<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>SystemHealthScreen.kt</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">app</a> &gt; <a href="index.source.html" class="el_package">com.serenityai.ui.screens</a> &gt; <span class="el_source">SystemHealthScreen.kt</span></div><h1>SystemHealthScreen.kt</h1><pre class="source lang-java linenums">package com.serenityai.ui.screens

import androidx.compose.foundation.layout.*
import androidx.compose.foundation.lazy.LazyColumn
import androidx.compose.foundation.lazy.items
import androidx.compose.material.icons.Icons
import androidx.compose.material.icons.filled.*
import androidx.compose.material3.*
import androidx.compose.runtime.*
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.graphics.Color
import androidx.compose.ui.text.font.FontWeight
import androidx.compose.ui.text.style.TextAlign
import androidx.compose.ui.unit.dp
import androidx.compose.ui.unit.sp
import com.serenityai.data.models.*
import com.serenityai.usecases.SystemHealthUseCase
import kotlinx.coroutines.delay
import java.text.SimpleDateFormat
import java.util.*

/**
 * UC22: Monitor System Health - UI Screen
 * 
 * Displays system health metrics, service status, and health reports.
 */
@OptIn(ExperimentalMaterial3Api::class)
@Composable
<span class="nc bnc" id="L30" title="All 10 branches missed.">fun SystemHealthScreen(onNavigateBack: () -&gt; Unit) {</span>
<span class="nc" id="L31">    val useCase = remember { SystemHealthUseCase() }</span>
<span class="nc" id="L32">    var healthReport by remember { mutableStateOf&lt;HealthReport?&gt;(null) }</span>
<span class="nc" id="L33">    var alerts by remember { mutableStateOf&lt;List&lt;HealthAlert&gt;&gt;(emptyList()) }</span>
<span class="nc" id="L34">    var isLoading by remember { mutableStateOf(false) }</span>
<span class="nc" id="L35">    var lastUpdated by remember { mutableStateOf&lt;Date?&gt;(null) }</span>
    
    // Auto-refresh health metrics every 30 seconds
<span class="nc" id="L38">    LaunchedEffect(Unit) {</span>
<span class="nc" id="L39">        while (true) {</span>
<span class="nc" id="L40">            isLoading = true</span>
<span class="nc" id="L41">            delay(500) // Simulate loading</span>
<span class="nc" id="L42">            healthReport = useCase.generateHealthReport()</span>
<span class="nc" id="L43">            alerts = useCase.alertOnCriticalHealthIssues(healthReport!!)</span>
<span class="nc" id="L44">            isLoading = false</span>
<span class="nc" id="L45">            lastUpdated = Date()</span>
<span class="nc" id="L46">            delay(30000) // Refresh every 30 seconds</span>
        }
    }
    
<span class="nc bnc" id="L50" title="All 2 branches missed.">    Scaffold(</span>
<span class="nc" id="L51">        topBar = {</span>
<span class="nc bnc" id="L52" title="All 8 branches missed.">            TopAppBar(</span>
<span class="nc bnc" id="L53" title="All 8 branches missed.">                title = { Text(&quot;System Health Monitor&quot;) },</span>
<span class="nc" id="L54">                navigationIcon = {</span>
<span class="nc bnc" id="L55" title="All 8 branches missed.">                    IconButton(onClick = onNavigateBack) {</span>
<span class="nc bnc" id="L56" title="All 8 branches missed.">                        Icon(Icons.Default.ArrowBack, contentDescription = &quot;Back&quot;)</span>
<span class="nc" id="L57">                    }</span>
<span class="nc" id="L58">                },</span>
<span class="nc" id="L59">                colors = TopAppBarDefaults.topAppBarColors(</span>
<span class="nc" id="L60">                    containerColor = MaterialTheme.colorScheme.primaryContainer</span>
                ),
<span class="nc" id="L62">                actions = {</span>
<span class="nc bnc" id="L63" title="All 8 branches missed.">                    IconButton(onClick = {</span>
<span class="nc" id="L64">                        isLoading = true</span>
<span class="nc" id="L65">                        healthReport = useCase.generateHealthReport()</span>
<span class="nc" id="L66">                        alerts = useCase.alertOnCriticalHealthIssues(healthReport!!)</span>
<span class="nc" id="L67">                        isLoading = false</span>
<span class="nc" id="L68">                        lastUpdated = Date()</span>
<span class="nc" id="L69">                    }) {</span>
<span class="nc bnc" id="L70" title="All 8 branches missed.">                        Icon(Icons.Default.Refresh, contentDescription = &quot;Refresh&quot;)</span>
<span class="nc" id="L71">                    }</span>
<span class="nc" id="L72">                }</span>
<span class="nc" id="L73">            )</span>
<span class="nc" id="L74">        }</span>
<span class="nc" id="L75">    ) { paddingValues -&gt;</span>
<span class="nc bnc" id="L76" title="All 8 branches missed.">        LazyColumn(</span>
<span class="nc" id="L77">            modifier = Modifier</span>
<span class="nc" id="L78">                .fillMaxSize()</span>
<span class="nc" id="L79">                .padding(paddingValues)</span>
<span class="nc" id="L80">                .padding(16.dp),</span>
<span class="nc" id="L81">            verticalArrangement = Arrangement.spacedBy(16.dp)</span>
<span class="nc" id="L82">        ) {</span>
            // Overall Health Status Card
<span class="nc" id="L84">            item {</span>
<span class="nc bnc" id="L85" title="All 12 branches missed.">                healthReport?.let { report -&gt;</span>
<span class="nc" id="L86">                    OverallHealthStatusCard(report.overallStatus, lastUpdated)</span>
<span class="nc" id="L87">                } ?: HealthLoadingCard()</span>
<span class="nc" id="L88">            }</span>
            
            // Critical Alerts
<span class="nc" id="L91">            item {</span>
<span class="nc bnc" id="L92" title="All 10 branches missed.">                if (alerts.isNotEmpty()) {</span>
<span class="nc bnc" id="L93" title="All 2 branches missed.">                    CriticalAlertsSection(alerts)</span>
<span class="nc" id="L94">                }</span>
<span class="nc" id="L95">            }</span>
            
            // Performance Metrics
<span class="nc" id="L98">            item {</span>
<span class="nc bnc" id="L99" title="All 10 branches missed.">                healthReport?.let { report -&gt;</span>
<span class="nc" id="L100">                    PerformanceMetricsCard(report.performanceMetrics)</span>
<span class="nc" id="L101">                }</span>
<span class="nc" id="L102">            }</span>
            
            // Service Status
<span class="nc" id="L105">            item {</span>
<span class="nc bnc" id="L106" title="All 10 branches missed.">                healthReport?.let { report -&gt;</span>
<span class="nc" id="L107">                    ServiceStatusCard(report.serviceStatuses)</span>
<span class="nc" id="L108">                }</span>
<span class="nc" id="L109">            }</span>
            
            // Critical Issues
<span class="nc" id="L112">            item {</span>
<span class="nc bnc" id="L113" title="All 10 branches missed.">                healthReport?.let { report -&gt;</span>
<span class="nc bnc" id="L114" title="All 4 branches missed.">                    if (report.criticalIssues.isNotEmpty()) {</span>
<span class="nc" id="L115">                        CriticalIssuesCard(report.criticalIssues)</span>
                    }
<span class="nc" id="L117">                }</span>
<span class="nc" id="L118">            }</span>
            
            // Recommendations
<span class="nc" id="L121">            item {</span>
<span class="nc bnc" id="L122" title="All 10 branches missed.">                healthReport?.let { report -&gt;</span>
<span class="nc bnc" id="L123" title="All 4 branches missed.">                    if (report.recommendations.isNotEmpty()) {</span>
<span class="nc" id="L124">                        RecommendationsCard(report.recommendations)</span>
                    }
<span class="nc" id="L126">                }</span>
<span class="nc" id="L127">            }</span>
<span class="nc" id="L128">        }</span>
<span class="nc" id="L129">    }</span>
<span class="nc bnc" id="L130" title="All 2 branches missed.">}</span>

@Composable
<span class="nc bnc" id="L133" title="All 14 branches missed.">fun OverallHealthStatusCard(status: HealthStatus, lastUpdated: Date?) {</span>
<span class="nc bnc" id="L134" title="All 4 branches missed.">    val statusColor = when (status) {</span>
<span class="nc" id="L135">        HealthStatus.HEALTHY -&gt; Color(0xFF4CAF50)</span>
<span class="nc" id="L136">        HealthStatus.WARNING -&gt; Color(0xFFFF9800)</span>
<span class="nc" id="L137">        HealthStatus.CRITICAL -&gt; Color(0xFFF44336)</span>
<span class="nc" id="L138">        HealthStatus.UNKNOWN -&gt; Color(0xFF9E9E9E)</span>
    }
    
<span class="nc bnc" id="L141" title="All 4 branches missed.">    val statusText = when (status) {</span>
<span class="nc" id="L142">        HealthStatus.HEALTHY -&gt; &quot;Healthy&quot;</span>
<span class="nc" id="L143">        HealthStatus.WARNING -&gt; &quot;Warning&quot;</span>
<span class="nc" id="L144">        HealthStatus.CRITICAL -&gt; &quot;Critical&quot;</span>
<span class="nc" id="L145">        HealthStatus.UNKNOWN -&gt; &quot;Unknown&quot;</span>
    }
    
<span class="nc bnc" id="L148" title="All 4 branches missed.">    val statusIcon = when (status) {</span>
<span class="nc" id="L149">        HealthStatus.HEALTHY -&gt; Icons.Default.CheckCircle</span>
<span class="nc" id="L150">        HealthStatus.WARNING -&gt; Icons.Default.Warning</span>
<span class="nc" id="L151">        HealthStatus.CRITICAL -&gt; Icons.Default.Error</span>
<span class="nc" id="L152">        HealthStatus.UNKNOWN -&gt; Icons.Default.Help</span>
    }
    
<span class="nc bnc" id="L155" title="All 2 branches missed.">    Card(</span>
<span class="nc" id="L156">        modifier = Modifier.fillMaxWidth(),</span>
<span class="nc" id="L157">        colors = CardDefaults.cardColors(</span>
<span class="nc" id="L158">            containerColor = MaterialTheme.colorScheme.primaryContainer</span>
        )
<span class="nc" id="L160">    ) {</span>
<span class="nc bnc" id="L161" title="All 6 branches missed.">        Column(</span>
<span class="nc" id="L162">            modifier = Modifier.padding(20.dp),</span>
<span class="nc" id="L163">            horizontalAlignment = Alignment.CenterHorizontally</span>
        ) {
<span class="nc" id="L165">            Icon(</span>
<span class="nc" id="L166">                statusIcon,</span>
<span class="nc" id="L167">                contentDescription = null,</span>
<span class="nc" id="L168">                modifier = Modifier.size(64.dp),</span>
<span class="nc" id="L169">                tint = statusColor</span>
            )
<span class="nc" id="L171">            Spacer(modifier = Modifier.height(12.dp))</span>
<span class="nc" id="L172">            Text(</span>
<span class="nc" id="L173">                text = &quot;System Status: $statusText&quot;,</span>
<span class="nc" id="L174">                fontSize = 24.sp,</span>
<span class="nc" id="L175">                fontWeight = FontWeight.Bold,</span>
<span class="nc" id="L176">                color = statusColor</span>
            )
<span class="nc bnc" id="L178" title="All 2 branches missed.">            lastUpdated?.let {</span>
<span class="nc" id="L179">                Spacer(modifier = Modifier.height(8.dp))</span>
<span class="nc" id="L180">                Text(</span>
<span class="nc" id="L181">                    text = &quot;Last updated: ${SimpleDateFormat(&quot;HH:mm:ss&quot;, Locale.getDefault()).format(it)}&quot;,</span>
<span class="nc" id="L182">                    fontSize = 14.sp,</span>
<span class="nc" id="L183">                    color = MaterialTheme.colorScheme.onSurfaceVariant</span>
                )
<span class="nc" id="L185">            }</span>
<span class="nc" id="L186">        }</span>
<span class="nc" id="L187">    }</span>
<span class="nc bnc" id="L188" title="All 2 branches missed.">}</span>

@Composable
<span class="nc bnc" id="L191" title="All 6 branches missed.">fun HealthLoadingCard() {</span>
<span class="nc bnc" id="L192" title="All 2 branches missed.">    Card(</span>
<span class="nc" id="L193">        modifier = Modifier.fillMaxWidth(),</span>
<span class="nc" id="L194">        colors = CardDefaults.cardColors(</span>
<span class="nc" id="L195">            containerColor = MaterialTheme.colorScheme.surfaceVariant</span>
        )
<span class="nc" id="L197">    ) {</span>
<span class="nc bnc" id="L198" title="All 6 branches missed.">        Box(</span>
<span class="nc" id="L199">            modifier = Modifier</span>
<span class="nc" id="L200">                .fillMaxWidth()</span>
<span class="nc" id="L201">                .padding(40.dp),</span>
<span class="nc" id="L202">            contentAlignment = Alignment.Center</span>
        ) {
<span class="nc" id="L204">            CircularProgressIndicator()</span>
<span class="nc" id="L205">        }</span>
<span class="nc" id="L206">    }</span>
<span class="nc bnc" id="L207" title="All 2 branches missed.">}</span>

@Composable
<span class="nc bnc" id="L210" title="All 10 branches missed.">fun CriticalAlertsSection(alerts: List&lt;HealthAlert&gt;) {</span>
<span class="nc bnc" id="L211" title="All 2 branches missed.">    Card(</span>
<span class="nc" id="L212">        modifier = Modifier.fillMaxWidth(),</span>
<span class="nc" id="L213">        colors = CardDefaults.cardColors(</span>
<span class="nc" id="L214">            containerColor = Color(0xFFFFEBEE)</span>
        )
<span class="nc" id="L216">    ) {</span>
<span class="nc bnc" id="L217" title="All 6 branches missed.">        Column(</span>
<span class="nc" id="L218">            modifier = Modifier.padding(16.dp)</span>
        ) {
<span class="nc" id="L220">            Row(</span>
<span class="nc" id="L221">                verticalAlignment = Alignment.CenterVertically</span>
            ) {
<span class="nc" id="L223">                Icon(</span>
<span class="nc" id="L224">                    Icons.Default.Error,</span>
<span class="nc" id="L225">                    contentDescription = null,</span>
<span class="nc" id="L226">                    tint = Color(0xFFD32F2F),</span>
<span class="nc" id="L227">                    modifier = Modifier.size(24.dp)</span>
                )
<span class="nc" id="L229">                Spacer(modifier = Modifier.width(8.dp))</span>
<span class="nc" id="L230">                Text(</span>
<span class="nc" id="L231">                    text = &quot;Critical Alerts (${alerts.size})&quot;,</span>
<span class="nc" id="L232">                    fontSize = 20.sp,</span>
<span class="nc" id="L233">                    fontWeight = FontWeight.Bold,</span>
<span class="nc" id="L234">                    color = Color(0xFFD32F2F)</span>
                )
<span class="nc" id="L236">            }</span>
<span class="nc" id="L237">            Spacer(modifier = Modifier.height(12.dp))</span>
<span class="nc" id="L238">            alerts.forEach { alert -&gt;</span>
<span class="nc" id="L239">                AlertCard(alert)</span>
<span class="nc" id="L240">                Spacer(modifier = Modifier.height(8.dp))</span>
<span class="nc" id="L241">            }</span>
<span class="nc" id="L242">        }</span>
<span class="nc" id="L243">    }</span>
<span class="nc bnc" id="L244" title="All 2 branches missed.">}</span>

@Composable
<span class="nc bnc" id="L247" title="All 10 branches missed.">fun AlertCard(alert: HealthAlert) {</span>
<span class="nc bnc" id="L248" title="All 2 branches missed.">    Card(</span>
<span class="nc" id="L249">        modifier = Modifier.fillMaxWidth(),</span>
<span class="nc" id="L250">        elevation = CardDefaults.cardElevation(defaultElevation = 2.dp)</span>
<span class="nc" id="L251">    ) {</span>
<span class="nc bnc" id="L252" title="All 6 branches missed.">        Row(</span>
<span class="nc" id="L253">            modifier = Modifier.padding(12.dp),</span>
<span class="nc" id="L254">            verticalAlignment = Alignment.CenterVertically</span>
        ) {
<span class="nc" id="L256">            Icon(</span>
<span class="nc" id="L257">                Icons.Default.Warning,</span>
<span class="nc" id="L258">                contentDescription = null,</span>
<span class="nc" id="L259">                tint = Color(0xFFD32F2F),</span>
<span class="nc" id="L260">                modifier = Modifier.size(20.dp)</span>
            )
<span class="nc" id="L262">            Spacer(modifier = Modifier.width(12.dp))</span>
<span class="nc" id="L263">            Column(modifier = Modifier.weight(1f)) {</span>
<span class="nc" id="L264">                Text(</span>
<span class="nc" id="L265">                    text = alert.message,</span>
<span class="nc" id="L266">                    fontSize = 14.sp,</span>
<span class="nc" id="L267">                    fontWeight = FontWeight.Medium</span>
                )
<span class="nc" id="L269">                Text(</span>
<span class="nc" id="L270">                    text = SimpleDateFormat(&quot;HH:mm:ss&quot;, Locale.getDefault()).format(alert.createdAt),</span>
<span class="nc" id="L271">                    fontSize = 12.sp,</span>
<span class="nc" id="L272">                    color = MaterialTheme.colorScheme.onSurfaceVariant</span>
                )
<span class="nc" id="L274">            }</span>
<span class="nc" id="L275">        }</span>
<span class="nc" id="L276">    }</span>
<span class="nc bnc" id="L277" title="All 2 branches missed.">}</span>

@Composable
<span class="nc bnc" id="L280" title="All 10 branches missed.">fun PerformanceMetricsCard(metrics: SystemHealthMetrics) {</span>
<span class="nc bnc" id="L281" title="All 2 branches missed.">    Card(</span>
<span class="nc" id="L282">        modifier = Modifier.fillMaxWidth(),</span>
<span class="nc" id="L283">        elevation = CardDefaults.cardElevation(defaultElevation = 4.dp)</span>
<span class="nc" id="L284">    ) {</span>
<span class="nc bnc" id="L285" title="All 6 branches missed.">        Column(</span>
<span class="nc" id="L286">            modifier = Modifier.padding(16.dp)</span>
        ) {
<span class="nc" id="L288">            Text(</span>
<span class="nc" id="L289">                text = &quot;Performance Metrics&quot;,</span>
<span class="nc" id="L290">                fontSize = 20.sp,</span>
<span class="nc" id="L291">                fontWeight = FontWeight.Bold</span>
            )
<span class="nc" id="L293">            Spacer(modifier = Modifier.height(16.dp))</span>
            
<span class="nc" id="L295">            MetricRow(&quot;CPU Usage&quot;, &quot;${String.format(&quot;%.1f&quot;, metrics.cpuUsage)}%&quot;, metrics.cpuUsage)</span>
<span class="nc" id="L296">            Spacer(modifier = Modifier.height(12.dp))</span>
<span class="nc" id="L297">            MetricRow(&quot;Memory Usage&quot;, &quot;${String.format(&quot;%.1f&quot;, metrics.memoryUsage)}%&quot;, metrics.memoryUsage)</span>
<span class="nc" id="L298">            Spacer(modifier = Modifier.height(12.dp))</span>
<span class="nc" id="L299">            MetricRow(&quot;Response Time&quot;, &quot;${metrics.responseTime}ms&quot;, null, reverse = true)</span>
<span class="nc" id="L300">            Spacer(modifier = Modifier.height(12.dp))</span>
<span class="nc" id="L301">            MetricRow(&quot;Error Rate&quot;, &quot;${String.format(&quot;%.2f&quot;, metrics.errorRate)}%&quot;, metrics.errorRate)</span>
<span class="nc" id="L302">            Spacer(modifier = Modifier.height(12.dp))</span>
<span class="nc" id="L303">            MetricRow(&quot;Active Users&quot;, &quot;${metrics.activeUsers}&quot;, null)</span>
<span class="nc" id="L304">            Spacer(modifier = Modifier.height(12.dp))</span>
<span class="nc" id="L305">            MetricRow(&quot;API Calls/min&quot;, &quot;${metrics.apiCallsPerMinute}&quot;, null)</span>
<span class="nc" id="L306">        }</span>
<span class="nc" id="L307">    }</span>
<span class="nc bnc" id="L308" title="All 2 branches missed.">}</span>

@Composable
<span class="nc bnc" id="L311" title="All 32 branches missed.">fun MetricRow(label: String, value: String, percentage: Double?, reverse: Boolean = false) {</span>
<span class="nc" id="L312">    Row(</span>
<span class="nc" id="L313">        modifier = Modifier.fillMaxWidth(),</span>
<span class="nc" id="L314">        horizontalArrangement = Arrangement.SpaceBetween,</span>
<span class="nc" id="L315">        verticalAlignment = Alignment.CenterVertically</span>
    ) {
<span class="nc" id="L317">        Text(</span>
<span class="nc" id="L318">            text = label,</span>
<span class="nc" id="L319">            fontSize = 16.sp,</span>
<span class="nc" id="L320">            fontWeight = FontWeight.Medium</span>
        )
        
<span class="nc" id="L323">        Row(</span>
<span class="nc" id="L324">            verticalAlignment = Alignment.CenterVertically,</span>
<span class="nc" id="L325">            horizontalArrangement = Arrangement.spacedBy(8.dp)</span>
        ) {
<span class="nc bnc" id="L327" title="All 2 branches missed.">            percentage?.let {</span>
<span class="nc" id="L328">                val color = when {</span>
<span class="nc bnc" id="L329" title="All 6 branches missed.">                    reverse -&gt; if (it &lt; 200.0) Color(0xFF4CAF50) else if (it &lt; 500.0) Color(0xFFFF9800) else Color(0xFFF44336)</span>
<span class="nc bnc" id="L330" title="All 2 branches missed.">                    it &lt; 50.0 -&gt; Color(0xFF4CAF50)</span>
<span class="nc bnc" id="L331" title="All 2 branches missed.">                    it &lt; 80.0 -&gt; Color(0xFFFF9800)</span>
<span class="nc" id="L332">                    else -&gt; Color(0xFFF44336)</span>
                }
<span class="nc" id="L334">                val progressValue = (it / 100.0).coerceIn(0.0, 1.0).toFloat()</span>
<span class="nc" id="L335">                LinearProgressIndicator(</span>
<span class="nc" id="L336">                    progress = progressValue,</span>
<span class="nc" id="L337">                    modifier = Modifier.width(100.dp),</span>
<span class="nc" id="L338">                    color = color</span>
                )
<span class="nc" id="L340">            }</span>
<span class="nc" id="L341">            Text(</span>
<span class="nc" id="L342">                text = value,</span>
<span class="nc" id="L343">                fontSize = 16.sp,</span>
<span class="nc" id="L344">                fontWeight = FontWeight.Bold</span>
            )
<span class="nc" id="L346">        }</span>
<span class="nc" id="L347">    }</span>
<span class="nc bnc" id="L348" title="All 2 branches missed.">}</span>

@Composable
<span class="nc bnc" id="L351" title="All 10 branches missed.">fun ServiceStatusCard(services: List&lt;ServiceStatus&gt;) {</span>
<span class="nc bnc" id="L352" title="All 2 branches missed.">    Card(</span>
<span class="nc" id="L353">        modifier = Modifier.fillMaxWidth(),</span>
<span class="nc" id="L354">        elevation = CardDefaults.cardElevation(defaultElevation = 4.dp)</span>
<span class="nc" id="L355">    ) {</span>
<span class="nc bnc" id="L356" title="All 6 branches missed.">        Column(</span>
<span class="nc" id="L357">            modifier = Modifier.padding(16.dp)</span>
        ) {
<span class="nc" id="L359">            Text(</span>
<span class="nc" id="L360">                text = &quot;Service Status&quot;,</span>
<span class="nc" id="L361">                fontSize = 20.sp,</span>
<span class="nc" id="L362">                fontWeight = FontWeight.Bold</span>
            )
<span class="nc" id="L364">            Spacer(modifier = Modifier.height(16.dp))</span>
            
<span class="nc" id="L366">            services.forEach { service -&gt;</span>
<span class="nc" id="L367">                ServiceStatusRow(service)</span>
<span class="nc" id="L368">                Spacer(modifier = Modifier.height(12.dp))</span>
<span class="nc" id="L369">            }</span>
<span class="nc" id="L370">        }</span>
<span class="nc" id="L371">    }</span>
<span class="nc bnc" id="L372" title="All 2 branches missed.">}</span>

@Composable
<span class="nc bnc" id="L375" title="All 10 branches missed.">fun ServiceStatusRow(service: ServiceStatus) {</span>
<span class="nc" id="L376">    Row(</span>
<span class="nc" id="L377">        modifier = Modifier.fillMaxWidth(),</span>
<span class="nc" id="L378">        horizontalArrangement = Arrangement.SpaceBetween,</span>
<span class="nc" id="L379">        verticalAlignment = Alignment.CenterVertically</span>
    ) {
<span class="nc" id="L381">        Row(</span>
<span class="nc" id="L382">            verticalAlignment = Alignment.CenterVertically,</span>
<span class="nc" id="L383">            horizontalArrangement = Arrangement.spacedBy(8.dp)</span>
        ) {
<span class="nc" id="L385">            Icon(</span>
<span class="nc bnc" id="L386" title="All 2 branches missed.">                if (service.isAvailable) Icons.Default.CheckCircle else Icons.Default.Error,</span>
<span class="nc" id="L387">                contentDescription = null,</span>
<span class="nc bnc" id="L388" title="All 2 branches missed.">                tint = if (service.isAvailable) Color(0xFF4CAF50) else Color(0xFFF44336),</span>
<span class="nc" id="L389">                modifier = Modifier.size(20.dp)</span>
            )
<span class="nc" id="L391">            Text(</span>
<span class="nc" id="L392">                text = service.serviceName,</span>
<span class="nc" id="L393">                fontSize = 16.sp,</span>
<span class="nc" id="L394">                fontWeight = FontWeight.Medium</span>
            )
<span class="nc" id="L396">        }</span>
        
<span class="nc" id="L398">        Text(</span>
<span class="nc bnc" id="L399" title="All 2 branches missed.">            text = if (service.isAvailable) &quot;Available (${service.responseTime}ms)&quot; else &quot;Unavailable&quot;,</span>
<span class="nc" id="L400">            fontSize = 14.sp,</span>
<span class="nc bnc" id="L401" title="All 2 branches missed.">            color = if (service.isAvailable) Color(0xFF4CAF50) else Color(0xFFF44336),</span>
<span class="nc" id="L402">            fontWeight = FontWeight.Medium</span>
        )
<span class="nc" id="L404">    }</span>
<span class="nc bnc" id="L405" title="All 2 branches missed.">}</span>

@Composable
<span class="nc bnc" id="L408" title="All 10 branches missed.">fun CriticalIssuesCard(issues: List&lt;HealthIssue&gt;) {</span>
<span class="nc bnc" id="L409" title="All 2 branches missed.">    Card(</span>
<span class="nc" id="L410">        modifier = Modifier.fillMaxWidth(),</span>
<span class="nc" id="L411">        colors = CardDefaults.cardColors(</span>
<span class="nc" id="L412">            containerColor = Color(0xFFFFEBEE)</span>
        ),
<span class="nc" id="L414">        elevation = CardDefaults.cardElevation(defaultElevation = 4.dp)</span>
<span class="nc" id="L415">    ) {</span>
<span class="nc bnc" id="L416" title="All 6 branches missed.">        Column(</span>
<span class="nc" id="L417">            modifier = Modifier.padding(16.dp)</span>
        ) {
<span class="nc" id="L419">            Row(</span>
<span class="nc" id="L420">                verticalAlignment = Alignment.CenterVertically</span>
            ) {
<span class="nc" id="L422">                Icon(</span>
<span class="nc" id="L423">                    Icons.Default.Warning,</span>
<span class="nc" id="L424">                    contentDescription = null,</span>
<span class="nc" id="L425">                    tint = Color(0xFFD32F2F),</span>
<span class="nc" id="L426">                    modifier = Modifier.size(24.dp)</span>
                )
<span class="nc" id="L428">                Spacer(modifier = Modifier.width(8.dp))</span>
<span class="nc" id="L429">                Text(</span>
<span class="nc" id="L430">                    text = &quot;Critical Issues (${issues.size})&quot;,</span>
<span class="nc" id="L431">                    fontSize = 20.sp,</span>
<span class="nc" id="L432">                    fontWeight = FontWeight.Bold,</span>
<span class="nc" id="L433">                    color = Color(0xFFD32F2F)</span>
                )
<span class="nc" id="L435">            }</span>
<span class="nc" id="L436">            Spacer(modifier = Modifier.height(12.dp))</span>
            
<span class="nc" id="L438">            issues.forEach { issue -&gt;</span>
<span class="nc" id="L439">                IssueRow(issue)</span>
<span class="nc" id="L440">                Spacer(modifier = Modifier.height(8.dp))</span>
<span class="nc" id="L441">            }</span>
<span class="nc" id="L442">        }</span>
<span class="nc" id="L443">    }</span>
<span class="nc bnc" id="L444" title="All 2 branches missed.">}</span>

@Composable
<span class="nc bnc" id="L447" title="All 10 branches missed.">fun IssueRow(issue: HealthIssue) {</span>
<span class="nc bnc" id="L448" title="All 2 branches missed.">    Card(</span>
<span class="nc" id="L449">        modifier = Modifier.fillMaxWidth(),</span>
<span class="nc" id="L450">        elevation = CardDefaults.cardElevation(defaultElevation = 2.dp)</span>
<span class="nc" id="L451">    ) {</span>
<span class="nc bnc" id="L452" title="All 6 branches missed.">        Column(</span>
<span class="nc" id="L453">            modifier = Modifier.padding(12.dp)</span>
        ) {
<span class="nc" id="L455">            Row(</span>
<span class="nc" id="L456">                modifier = Modifier.fillMaxWidth(),</span>
<span class="nc" id="L457">                horizontalArrangement = Arrangement.SpaceBetween</span>
            ) {
<span class="nc" id="L459">                Text(</span>
<span class="nc" id="L460">                    text = issue.type.name.replace(&quot;_&quot;, &quot; &quot;),</span>
<span class="nc" id="L461">                    fontSize = 14.sp,</span>
<span class="nc" id="L462">                    fontWeight = FontWeight.Bold</span>
                )
<span class="nc" id="L464">                Text(</span>
<span class="nc" id="L465">                    text = issue.severity.name,</span>
<span class="nc" id="L466">                    fontSize = 12.sp,</span>
<span class="nc" id="L467">                    color = Color(0xFFD32F2F),</span>
<span class="nc" id="L468">                    fontWeight = FontWeight.Medium</span>
                )
<span class="nc" id="L470">            }</span>
<span class="nc" id="L471">            Spacer(modifier = Modifier.height(4.dp))</span>
<span class="nc" id="L472">            Text(</span>
<span class="nc" id="L473">                text = issue.description,</span>
<span class="nc" id="L474">                fontSize = 14.sp</span>
            )
<span class="nc" id="L476">        }</span>
<span class="nc" id="L477">    }</span>
<span class="nc bnc" id="L478" title="All 2 branches missed.">}</span>

@Composable
<span class="nc bnc" id="L481" title="All 10 branches missed.">fun RecommendationsCard(recommendations: List&lt;String&gt;) {</span>
<span class="nc bnc" id="L482" title="All 2 branches missed.">    Card(</span>
<span class="nc" id="L483">        modifier = Modifier.fillMaxWidth(),</span>
<span class="nc" id="L484">        elevation = CardDefaults.cardElevation(defaultElevation = 4.dp)</span>
<span class="nc" id="L485">    ) {</span>
<span class="nc bnc" id="L486" title="All 6 branches missed.">        Column(</span>
<span class="nc" id="L487">            modifier = Modifier.padding(16.dp)</span>
        ) {
<span class="nc" id="L489">            Row(</span>
<span class="nc" id="L490">                verticalAlignment = Alignment.CenterVertically</span>
            ) {
<span class="nc" id="L492">                Icon(</span>
<span class="nc" id="L493">                    Icons.Default.Lightbulb,</span>
<span class="nc" id="L494">                    contentDescription = null,</span>
<span class="nc" id="L495">                    tint = MaterialTheme.colorScheme.primary,</span>
<span class="nc" id="L496">                    modifier = Modifier.size(24.dp)</span>
                )
<span class="nc" id="L498">                Spacer(modifier = Modifier.width(8.dp))</span>
<span class="nc" id="L499">                Text(</span>
<span class="nc" id="L500">                    text = &quot;Recommendations&quot;,</span>
<span class="nc" id="L501">                    fontSize = 20.sp,</span>
<span class="nc" id="L502">                    fontWeight = FontWeight.Bold</span>
                )
<span class="nc" id="L504">            }</span>
<span class="nc" id="L505">            Spacer(modifier = Modifier.height(12.dp))</span>
            
<span class="nc" id="L507">            recommendations.forEach { recommendation -&gt;</span>
<span class="nc" id="L508">                Row(</span>
<span class="nc" id="L509">                    modifier = Modifier.fillMaxWidth(),</span>
<span class="nc" id="L510">                    verticalAlignment = Alignment.Top</span>
                ) {
<span class="nc" id="L512">                    Icon(</span>
<span class="nc" id="L513">                        Icons.Default.CheckCircle,</span>
<span class="nc" id="L514">                        contentDescription = null,</span>
<span class="nc" id="L515">                        tint = MaterialTheme.colorScheme.primary,</span>
<span class="nc" id="L516">                        modifier = Modifier.size(20.dp)</span>
                    )
<span class="nc" id="L518">                    Spacer(modifier = Modifier.width(12.dp))</span>
<span class="nc" id="L519">                    Text(</span>
<span class="nc" id="L520">                        text = recommendation,</span>
<span class="nc" id="L521">                        fontSize = 14.sp,</span>
<span class="nc" id="L522">                        modifier = Modifier.weight(1f)</span>
                    )
<span class="nc" id="L524">                }</span>
<span class="nc" id="L525">                Spacer(modifier = Modifier.height(8.dp))</span>
<span class="nc" id="L526">            }</span>
<span class="nc" id="L527">        }</span>
<span class="nc" id="L528">    }</span>
<span class="nc bnc" id="L529" title="All 2 branches missed.">}</span>

</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.12.202403310830</span></div></body></html>